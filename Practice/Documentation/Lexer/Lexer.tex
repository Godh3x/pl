\providecommand{\main}{..}
\documentclass[\main/MemoriaPL.tex]{subfiles}

% !TEX root = ../MemoriaPL.tex

\begin{document}
  \section{Clases léxicas} \label{lexicon}
    \par
    La descripción de las clases léxicas identificadas se hará de manera informal, en lenguaje natural.

    \begin{itemize}
      \item \textbf{SPROG}
        \par
        Es el separador \&\& que indica el fin de la sección de declaracionesy el comienzo de la de instrucciones.
      \item \textbf{LREAL}
        \par
        Empiezan con un signo (+ o -) opcional, a continuación aparecen uno o más dígitos cualesquiera.
        Seguida de esta parte puede aparecer una decimal que consta de un punto seguido de uno o más dígitos cualesquiera.
        Por último, tiene una E o e seguida de un signo (+ o -), opcional, y de uno o más dígitos cualesquiera.
      \item \textbf{ID}
        \par
        Comienza por una letra cualquiera y la sigue una secuencia de cero o más letras, dígitos o subrayado(\_).
      \item \textbf{BOOL}
        \par
        Es una palabra reservada que se conforma por las letras minúsculas: b, o, o, l. En ese orden.
      \item \textbf{NUM}
        \par
        Palabra reservada formada por las letras minúsculas: n, u, m. En ese orden.
      \item \textbf{TRUE}
        \par
        Es una palabra reservada compuesta por las letras minúsculas: t, r, u, e. En ese orden.
      \item \textbf{FALSE}
        \par
        Palabra reservada que contiene las siguientes letras minúsculas: f, a, l, s, e. En ese orden.
      \item \textbf{PLUS}
        \par
        Representa ua suma, \textbackslash +.
      \item \textbf{MINUS}
        \par
        Representa una resta, \textbackslash -.
      \item \textbf{MUL}
        \par
        Representa la multiplicación, \textbackslash $\ast$.
      \item \textbf{DIV}
        \par
        Representa la división, /.
      \item \textbf{IS}
        \par
        Representación de la asignación, =.
      \item \textbf{EQ}
        \par
        Representa una comparación, ==.
      \item \textbf{GT}
        \par
        Representa el mayor que, $>$.
      \item \textbf{GEQ}
        \par
        Representa el mayor o igual que, $>$=.
      \item \textbf{LT}
        \par
        Representa el menor que, $<$.
      \item \textbf{LEQ}
        \par
        Representa el menor o igual que, $<$=.
      \item \textbf{NEQ}
        \par
        Representa una desigualdad, !=.
      \item \textbf{AND}
        \par
        Representa el operador lógico and.
      \item \textbf{OR}
        \par
        Representa el operador lógico or.
      \item \textbf{NOT}
        \par
        Representa el operador lógico not.
      \item \textbf{POP}
        \par
        Representa un paréntesis de apertura, $($.
      \item \textbf{PCL}
        \par
        Representa un paréntesis de cierre, $)$.
    \end{itemize}

  \section{Especificación formal}
    \par
    Vamos a utilizar $DR_s$ para dar una descrición formal del lenguaje que conforman las clases léxicas del \cref{lexicon}.

    \vspace{2mm}
    \hspace{5mm}($\ast$) SPROG $\equiv$ \&\& \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) LREAL $\equiv$ \underline{LENT} \underline{PDEC}? \underline{PEXP}? \\
      \hspace{10mm} PDEC $\equiv$ \textbackslash. \underline{Dig}$\ast$ \underline{Dig} \\
      \hspace{10mm} PEXP $\equiv$ (E $\mid$ e) \underline{LENT} \\
      \vspace{2mm}
      \hspace{10mm} LENT $\equiv$ \underline{Sign}? \underline{Dig}$\ast$ \underline{Dig} \\
      \hspace{10mm} Sign $\equiv$ [\textbackslash+, \textbackslash-] \\
      \hspace{10mm} Dig   $\equiv$ [0-9] \\
      \vspace{2mm}
    \hspace{5mm}($\ast$) ID $\equiv$ \underline{Letter} (\underline{Letter} $\mid$ \underline{Dig} $\mid$ \_)$\ast$ \\
      \hspace{10mm} Letter $\equiv$ [a-z, A-Z] \\
      \hspace{10mm} Dig $\equiv$ [0-9] \\
    \vspace{2mm}
      \hspace{5mm}($\ast$) BOOL $\equiv$ b o o l \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) NUM $\equiv$ n u m \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) TRUE $\equiv$ t r u e \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) FALSE $\equiv$ f a l s e \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) PLUS $\equiv$ \textbackslash + \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) MINUS $\equiv$ \textbackslash - \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) MUL $\equiv$ \textbackslash $\ast$ \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) DIV $\equiv$ / \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) IS $\equiv$ = \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) EQ $\equiv$ == \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) GT $\equiv$ $>$ \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) GEQ $\equiv$ $>$= \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) LT $\equiv$ $<$ \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) LEQ $\equiv$ $<$= \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) NEQ $\equiv$ != \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) AND $\equiv$ a n d \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) OR $\equiv$ o r \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) NOT $\equiv$ n o t \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) POP $\equiv$ \textbackslash $($ \\
    \vspace{2mm}
    \hspace{5mm}($\ast$) PCL $\equiv$ \textbackslash $)$ \\
    \vspace{2mm}
    \hspace{5mm}$[I]$ SEP $\equiv$ $[$' ', \textbackslash t, \textbackslash n, \textbackslash r, \textbackslash b] \\

  \section{Diagrama de transiciones} %TODO
  \begin{tikzpicture}[shorten >=1pt,node distance=2cm,on grid,auto]
    \node[state]            (q_0)                {Init};
    \node[state, accepting] (q_1) [above=2.2of q_0]  {\scriptsize R\_LINT};
    \node[state, accepting] (q_2) [left=3of q_1] {\scriptsize R\_PLUS};
    \node[state, accepting] (q_3) [right=3of q_1] {\scriptsize R\_MINUS};
    \node[state] (q_4) [above=of q_3] {\scriptsize R\_DOT};
    \node[state, accepting] (q_5) [above=of q_2] {\scriptsize R\_LDEC};
    \node[state] (q_6) [above=of q_4] {\scriptsize R\_EXP};
    \node[state] (q_7) [left=3of q_6] {\scriptsize R\_SIGN};
    \node[state, accepting] (q_8) [above=of q_5] {\scriptsize R\_LEXP};
    \node[state] (q_9) [right=3of q_0] {\scriptsize R\_\&};
    \node[state, accepting] (q_10) [right=2.5of q_9] {\scriptsize R\_SPROG};
    \node[state, accepting] (q_11) [below=of q_10] {\scriptsize R\_ID};
    \node[state, accepting] (q_12) [left=6of q_0] {\scriptsize R\_POP};
    \node[state, accepting] (q_13) [below=of q_12] {\scriptsize R\_PCL};
    \node[state, accepting] (q_14) [below right=of q_13] {\scriptsize R\_MUL};
    \node[state, accepting] (q_15) [right=9.3of q_14] {\scriptsize R\_DIV};
    \node[] (dummy) [below=4of q_0] {};
    \node[state, accepting] (q_16) [left=.9of dummy] {\scriptsize R\_GT};
    \node[state, accepting] (q_17) [left=of q_16] {\scriptsize R\_IS};
    \node[state, accepting] (q_18) [right=.9of dummy] {\scriptsize R\_LT};
    \node[state] (q_19) [right=of q_18] {\scriptsize R\_NOT};
    \node[state, accepting] (q_20) [below=2.5of q_17] {\scriptsize R\_EQ};
    \node[state, accepting] (q_21) [below=2.5of q_16] {\scriptsize R\_GEQ};
    \node[state, accepting] (q_22) [below=2.5of q_18] {\scriptsize R\_LEQ};
    \node[state, accepting] (q_23) [below=2.5of q_19] {\scriptsize R\_NEQ};

    \draw[<-] (q_0) -- node[fill=white, right] {start} ++(1cm,0cm);
    \path[->]
          (q_0) edge [loop left] node {$[$' ',\textbackslash t,\textbackslash n,\textbackslash r,\textbackslash b]} (q_0)
                edge              node [fill=white, anchor=center, pos=0.5]          {Dig} (q_1)
                edge              node [fill=white, anchor=center, pos=0.5]     {+} (q_2)
                edge              node [fill=white, anchor=center, pos=0.5]           {-} (q_3)
                edge [bend left]        node [fill=white, anchor=center, pos=0.5]           {\&} (q_9)
                edge [bend left=5] node [fill=white, anchor=center, pos=0.5] {Letter} (q_11)
                edge [bend right=25] node [fill=white, anchor=center, pos=0.5] {\textbackslash$($} (q_12)
                edge node [fill=white, anchor=center, pos=0.5] {\textbackslash$)$} (q_13)
                edge node [fill=white, anchor=center, pos=0.5] {\textbackslash$\ast$} (q_14)
                edge node [fill=white, anchor=center, pos=0.5] {/} (q_15)
                edge  node [fill=white, anchor=center, pos=0.5] {=} (q_17)
                edge  node [fill=white, anchor=center, pos=0.5] {$>$} (q_16)
                edge  node [fill=white, anchor=center, pos=0.5] {$<$} (q_18)
                edge  node [fill=white, anchor=center, pos=0.5] {!} (q_19)
                (q_1) edge              node[fill=white, anchor=center, pos=0.5]     {\textbackslash .} (q_4)
                edge [loop above] node [left, near start] {Dig} (q_1)
          (q_2) edge              node [fill=white, anchor=center, pos=0.5]            {Dig} (q_1)
          (q_3) edge              node [fill=white, anchor=center, pos=0.5]            {Dig} (q_1)
          (q_4) edge node [fill=white, anchor=center, pos=0.5] {Dig} (q_5)
          (q_5) edge [loop left] node [below, near start] {Dig} (q_5)
                edge [bend right=10] node [fill=white, anchor=center, pos=0.5] {e $\mid$ E} (q_6)
          (q_6) edge  node [fill=white, anchor=center, pos=0.5] {\scriptsize $[$\textbackslash+, \textbackslash -$]$} (q_7)
                edge [bend right] node [fill=white, anchor=center, pos=0.5] {Dig} (q_8)
          (q_7) edge  node [fill=white, anchor=center, pos=0.5] {Dig} (q_8)
          (q_8) edge [loop left] node [below, near start] {Dig} (q_8)
          (q_9) edge  node [fill=white, anchor=center, pos=0.5] {\&} (q_10)
          (q_11) edge [loop right] node {Letter $\mid$ Dig $\mid$ \_} (q_11)
          (q_16) edge node [fill=white, anchor=center, pos=0.5] {=} (q_21)
          (q_17) edge node [fill=white, anchor=center, pos=0.5] {=} (q_20)
          (q_18) edge node [fill=white, anchor=center, pos=0.5] {=} (q_22)
          (q_19) edge node [fill=white, anchor=center, pos=0.5] {=} (q_23);
  \end{tikzpicture}

  \begin{tikzpicture}[shorten >=1pt,node distance=2cm,on grid,auto]2.5
    \node[state]            (q_0)                {Init};
    \node[state, accepting] (q_1) [above=2.2of q_0]  {\scriptsize R\_LINT};
    \node[state, accepting] (q_2) [left=3of q_1] {\scriptsize R\_PLUS};
    \node[state, accepting] (q_3) [right=3of q_1] {\scriptsize R\_MINUS};
    \node[state] (q_4) [above=of q_3] {\scriptsize R\_DOT};
    \node[state, accepting] (q_5) [above=of q_2] {\scriptsize R\_LDEC};
    \node[state] (q_6) [above=of q_4] {\scriptsize R\_EXP};
    \node[state] (q_7) [left=3of q_6] {\scriptsize R\_SIGN};
    \node[state, accepting] (q_8) [above=of q_5] {\scriptsize R\_LEXP};
    \node[state] (q_9) [right=3of q_0] {\scriptsize R\_\&};
    \node[state, accepting] (q_10) [right=2.5of q_9] {\scriptsize R\_SPROG};
    \node[state, accepting] (q_11) [below=of q_10] {\scriptsize R\_ID};
    \node[state, accepting] (q_12) [left=6of q_0] {\scriptsize R\_POP};
    \node[state, accepting] (q_13) [below=of q_12] {\scriptsize R\_PCL};
    \node[state, accepting] (q_14) [below right=of q_13] {\scriptsize R\_MUL};
    \node[state, accepting] (q_15) [right=9.3of q_14] {\scriptsize R\_DIV};
    \node[] (dummy) [below=4of q_0] {};
    \node[state, accepting] (q_16) [left=.9of dummy] {\scriptsize R\_GT};
    \node[state, accepting] (q_17) [left=of q_16] {\scriptsize R\_IS};
    \node[state, accepting] (q_18) [right=.9of dummy] {\scriptsize R\_LT};
    \node[state] (q_19) [right=of q_18] {\scriptsize R\_NOT};
    \node[state, accepting] (q_20) [below=of dummy] {\scriptsize R\_EQ};

    \draw[<-] (q_0) -- node[fill=white, right] {start} ++(1cm,0cm);
    \path[->]
          (q_0) edge [loop left] node {$[$' ',\textbackslash t,\textbackslash n,\textbackslash r,\textbackslash b]} (q_0)
                edge              node [fill=white, anchor=center, pos=0.5]          {Dig} (q_1)
                edge              node [fill=white, anchor=center, pos=0.5]     {+} (q_2)
                edge              node [fill=white, anchor=center, pos=0.5]           {-} (q_3)
                edge [bend left]        node [fill=white, anchor=center, pos=0.5]           {\&} (q_9)
                edge [bend left=5] node [fill=white, anchor=center, pos=0.5] {Letter} (q_11)
                edge [bend right=25] node [fill=white, anchor=center, pos=0.5] {\textbackslash$($} (q_12)
                edge node [fill=white, anchor=center, pos=0.5] {\textbackslash$)$} (q_13)
                edge [bend left = 5] node [fill=white, anchor=center, pos=0.5] {\textbackslash$\ast$} (q_14)
                edge [bend right = 5] node [fill=white, anchor=center, pos=0.5] {/} (q_15)
                edge  node [fill=white, anchor=center, pos=0.5] {=} (q_16)
                edge  node [fill=white, anchor=center, pos=0.5] {$>$} (q_17)
                edge  node [fill=white, anchor=center, pos=0.5] {$<$} (q_18)
                edge  node [fill=white, anchor=center, pos=0.5] {!} (q_19)
                (q_1) edge              node[fill=white, anchor=center, pos=0.5]     {\textbackslash .} (q_4)
                edge [loop above] node [left, near start] {Dig} (q_1)
          (q_2) edge              node [fill=white, anchor=center, pos=0.5]            {Dig} (q_1)
          (q_3) edge              node [fill=white, anchor=center, pos=0.5]            {Dig} (q_1)
          (q_4) edge node [fill=white, anchor=center, pos=0.5] {Dig} (q_5)
          (q_5) edge [loop left] node [below, near start] {Dig} (q_5)
                edge [bend right=10] node [fill=white, anchor=center, pos=0.5] {e $\mid$ E} (q_6)
          (q_6) edge  node [fill=white, anchor=center, pos=0.5] {\scriptsize $[$\textbackslash+, \textbackslash -$]$} (q_7)
                edge [bend right] node [fill=white, anchor=center, pos=0.5] {Dig} (q_8)
          (q_7) edge  node [fill=white, anchor=center, pos=0.5] {Dig} (q_8)
          (q_8) edge [loop left] node [below, near start] {Dig} (q_8)
          (q_9) edge  node [fill=white, anchor=center, pos=0.5] {\&} (q_10)
          (q_11) edge [loop right] node {Letter $\mid$ Dig $\mid$ \_} (q_11)
          (q_16) edge node [fill=white, anchor=center, pos=0.5] {=} (q_20)
          (q_17) edge node [fill=white, anchor=center, pos=0.5] {=} (q_20)
          (q_18) edge node [fill=white, anchor=center, pos=0.5] {=} (q_20)
          (q_19) edge node [fill=white, anchor=center, pos=0.5] {=} (q_20);
  \end{tikzpicture}

\end{document}